if("undefined"==typeof brutusin)window.brutusin=new Object;else if("object"!=typeof brutusin)throw"brutusin global variable already exists";!function(){"use strict";var e={};String.prototype.startsWith||(String.prototype.startsWith=function(e,r){return r=r||0,this.indexOf(e,r)===r}),String.prototype.endsWith||(String.prototype.endsWith=function(e,r){var t=this.toString();(void 0===r||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return-1!==n&&n===r}),String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),String.prototype.format||(String.prototype.format=function(){for(var e=this,r=0;r<arguments.length;r++){var t=new RegExp("\\{"+r+"\\}","gi");e=e.replace(t,arguments[r])}return e}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,r){return-1!==this.indexOf(e,r)}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,r){var t;if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return-1;var a=0|r;if(a>=i)return-1;for(t=Math.max(a>=0?a:i-Math.abs(a),0);i>t;){if(t in n&&n[t]===e)return t;t++}return-1}),Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},e.Form=function(r){var t=new e.SchemaResolver;t.updateFrom({});var n=new e.SchemaBean(t),i=new e.GraphicBean(n,r);this.setSchema=function(e){t.updateFrom(e),this.setValue(this.getValue())},this.setValue=function(r){r=e.utils.initializeValue(t.getSubSchema("$"),r),i.setValue(r)},this.getValue=function(){return i.getValue()},this.getErrors=function(){return i.getErrors()}},e.GraphicBean=function(r,t){function n(){if(l.schema=r.schema,e.utils.cleanNode(t),r.schema){var n=e.version.getVersion(r.schema);l.renderer=e.version[n].rendererFactory.createRender(d,t),s()}}function i(e,r,t){var n=e[r];if(n){var i=n[t];return delete n[t],i}}function a(e,r,t,n){var i=r[t];i||(i={},r[t]=i),i[n]=e}function o(e){if("object"!==d.getSchema().type)return!0;if(!e)return!1;if(d.getSchema().properties)for(var r in d.getSchema().properties)if(!e.hasOwnProperty(r))return!1;return!0}function s(){var t=r.getValue();if(o(t)){d.onValueChanged(t);var n={},s=r.getChildren();for(var f in s)for(var p in s[f]){var c=i(u,f,p);c&&c.schemaBean===s[f][p]||(c=new e.GraphicBean(s[f][p],l.renderer.getChildContainer(f,p))),a(c,n,f,p)}u=n}}if(!r)throw"schemaResolver is required";if(!t)throw"container is required";var l=this;this.schemaBean=r;var d=new e.rendering.RenderingBean(r);this.container=t,this.id=r.id,this.schemaId=r.schemaId;var u={};this.dispose=function(){r.dispose()},this.getValue=function(){var t=e.version.getVersion(this.schema),n=e.version[t].valueCleaner;return n.getCleanedValue(r)},this.getChildren=function(){return u},this.setValue=function(e){r.setValue(e)},this.getErrors=function(){return r.getErrors()},this.addValueListener=function(e){r.addValueListener(e)},this.removeValueListener=function(e){r.removeValueListener(e)},this.addSchemaListener=function(e){r.addSchemaListener(e)},this.removeSchemaListener=function(e){r.removeSchemaListener(e)},this.addDisposeListener=function(e){r.addDisposeListener(e)},this.removeDisposeListener=function(e){r.removeDisposeListener(e)},n(),r.addValueListener(s),r.addSchemaListener(function(){n()}),r.addDisposeListener(function(){e.utils.cleanNode(t)})},e.SchemaBean=function(r,t,n){function i(e,r){e&&(r.includes(e)||r.push(e))}function a(e,r){if(e){var t=r.indexOf(e);t>-1&&r.splice(t,1)}}function o(e){for(var r in e)for(var t in e[r])e[r][t].dispose()}function s(e,r,t){var n=e[r];if(n){var i=n[t];return delete n[t],i}}function l(e,r,t,n){var i=r[t];i||(i={},r[t]=i),i[n]=e}function d(e){for(var r=0;r<e.length;r++)e[r](p)}function u(){var e=[];for(var r in v)for(var t in v[r]){var n=v[r][t];n.getErrors()&&e.push(n.getErrors())}S=h.validate(p.schema,V,e),C=h.isAbsorvedChildrenErrors(p.schema,V,e)}function f(){if(p.schema){var i={},a=e.version.getVersion(p.schema),d=e.version[a].visitor,f=[];d.visitInstanceChildren(V,p.schema,function(a,o,d){var u=t+a,p=n+o,c=s(v,u,p);c||(c=new e.SchemaBean(r,u,p),c.addValueListener(O),null!==c.getValue()&&f.push(c)),l(c,i,u,p),c.setValue(d)}),o(v),v=i,u();var c=w;w=!0;for(var h=0;h<f.length;h++)O(f[h]);w=c}}if(!r)throw"schemaResolver is required";t||(t="$"),n||(n="$");var p=this;this.schemaResolver=r,this.id=t,this.schemaId=n,this.schema=r.getSubSchema(n);var c=e.version.getVersion(p.schema),h=e.version[c].validator,v={},m=[],g=[],y=[],V=null,S=null,C=null,b=function(e){p.schema=e,f(),d(g)},w=!0,O=function(e){if(w){var r,n;if("array"===p.schema.type){for(var i=0;i<V.length;i++)if(r=t+"["+i+"]",r===e.id){n=i;break}}else if("object"===p.schema.type){for(var a in V)if(r=t+"."+a,r===e.id){n=a;break}}else r=p.id;if(r&&v[r]){if("undefined"!=typeof n)V[n]=e.getValue();else{V=e.getValue();for(var o in v[r])o!==e.schemaId&&v[r][o].setValue(V)}d(m)}u()}};r.addListener(n,b),f(),this.dispose=function(){if(r.removeListener(n,b),v)for(var e=0;e<v.length;e++)v[e].dispose();d(y),m=null,g=null,y=null,v=null},this.getValue=function(){return"undefined"!=typeof V?JSON.parse(JSON.stringify(V)):void 0},this.getChildren=function(){return v},this.setValue=function(e){if("undefined"!=typeof e){var r=w;w=!1;var t=JSON.stringify(e),n=t!==JSON.stringify(V);V=JSON.parse(t),n&&(f(),d(m)),w=r}},this.getErrors=function(){var e={};if(null!==S&&(e[t]=S),v&&!C)for(var r in v){var n=v[r];for(var i in n){var a=n[i].getErrors();if(a)for(var o in a)e[o]||(e[o]=[]),e[o].push(a[o])}}return Object.keys(e).length>0?e:null},this.addValueListener=function(e){i(e,m)},this.removeValueListener=function(e){a(e,m)},this.addSchemaListener=function(e){i(e,g)},this.removeSchemaListener=function(e){a(e,g)},this.addDisposeListener=function(e){i(e,y)},this.removeDisposeListener=function(e){a(e,y)},e.version[e.version.getVersion(this.schema)].initializer.initSchemaBean(this)},e.SchemaResolver=function(){function r(e){return e}function t(r){var t={},n=e.version.getVersion(r),i=e.version[n].visitor;return i.visitSchema(r,function(r,i){var a=e.version[n].initializer.createPseudoSchema(r,i,n);t[r]=a}),t}var n={},i={};this.updateFrom=function(e){var r=[],a=t(e);for(var o in a)i.hasOwnProperty(o)&&JSON.stringify(a[o])===JSON.stringify(i[o])||r.push(o);for(var o in i)a.hasOwnProperty(o)||r.push(o);i=a;for(var s=0;s<r.length;s++){var l=n[r[s]];if(l)for(var d=0;d<l.length;d++)l[d](this.getSubSchema(r[s]))}},this.getSubSchema=function(e){return i.hasOwnProperty(e)?i[e]:null},this.addListener=function(e,t){e=r(e),n.hasOwnProperty(e)?n[e].push(t):n[e]=[t]},this.removeListener=function(e,t){if(e=r(e),n.hasOwnProperty(e))for(var i=n[e],a=0;a<i.length;a++)if(i[a]===t){i.splice(a,1);break}}},e.utils={i18n:{translations:{},setTranslations:function(e){if(!e)throw"A translation map is required";this.translations=e},getTranslation:function(e){return this.translations[e]?this.translations[e]:"{$"+e+"}"}},cleanNode:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},appendChild:function(e,r,t){e.appendChild(r)},initializeValue:function(e,r){if("object"===e.type&&(null===r&&(r={}),e.properties))for(var t in e.properties)r.hasOwnProperty(t)||(r[t]=null);return r}},e.validation||(e.validation={}),e.validation.Validator=function(){this.validate=function(e,r,t){var n=this.doValidate(e,r,t);return n&&0!==n.length?n:null},this.doValidate=function(e,r,t){},this.isAbsorvedChildrenErrors=function(e,r,t){return!1}},e.validation.DelegatingValidator=function(){var e=[];this.registerConcreteValidator=function(r){e.push(r)},this.unregisterConcreteValidator=function(r){var t=e.indexOf(r);t>-1&&e.splice(t,1)},this.doValidate=function(r,t,n){for(var i=[],a=0;a<e.length;a++){var o=e[a].validate(r,t,n);if(null!==o)for(var s=0;s<o.length;s++)i.push(o[s])}return i},this.isAbsorvedChildrenErrors=function(r,t,n){for(var i=0;i<e.length;i++)if(e[i].isAbsorvedChildrenErrors(r,t,n))return!0;return!1}},e.validation.DelegatingValidator.prototype=new e.validation.Validator,e.rendering||(e.rendering={}),e.rendering.context={valueChangedInRenderer:!1},e.rendering||(e.rendering={}),e.rendering.Renderer=function(e,r){this.getChildContainer=function(){return null}},e.rendering||(e.rendering={}),e.rendering.RenderingBean=function(r){this.id=r.id,this.schemaId=r.schemaId,this.getValue=function(){return r.getValue()},this.setValue=function(t){var n=e.rendering.context.valueChangedInRenderer;e.rendering.context.valueChangedInRenderer=!0,r.setValue(t),e.rendering.context.valueChangedInRenderer=n},this.getErrors=function(e,t){return r.getChildren()[e][t].getErrors()},this.getSchema=function(e){return e?r.schemaResolver.getSubSchema(e):r.schema},this.onValueChanged=function(){}},e.rendering||(e.rendering={}),e.rendering.ValueCleaner={getCleanedValue:function(e){return e.getValue()}},e.version||(e.version={}),e.version["draft-05"]||(e.version["draft-05"]={}),e.version["draft-05"].valueCleaner={getCleanedValue:function(e){function r(t,n,i){var a=e.schemaResolver.getSubSchema(n);if(null===a&&(a={}),t instanceof Array){if(0===t.length)return null;for(var o=new Array,s=0;s<t.length;s++)o[s]=r(t[s],a.items);return o}if(""===t)return null;if(t instanceof Object){var o=new Object,l=!1;for(var d in t){var u=null;if(a.hasOwnProperty("properties")&&a.properties.hasOwnProperty(d))u=a.properties[d];else if(null===u&&a.hasOwnProperty("patternProperties"))for(var f in a.patternProperties){var p=RegExp(f);if(-1!==d.search(p)){u=a.patternProperties[f];break}}else null===u&&a.hasOwnProperty("additionalProperties")&&"object"==typeof a.additionalProperties&&(u=a.additionalProperties);var c=r(t[d],u,a.required&&a.required.includes(d));(null!==c||a.hasOwnProperty("minProperties")||a.hasOwnProperty("maxProperties"))&&(o[d]=c,l=!0)}return l||i?o:null}return t}return r(e.getValue(),e.schemaId)}},e.version||(e.version={}),e.version["draft-05"]||(e.version["draft-05"]={}),e.version["draft-05"].visitor={visitSchema:function(e,r){function t(r){for(var t=r.split("/"),n=e,i=1;i<t.length;i++)n=n[t[i]];return n}function n(e,r,i){if(r)if(i(e,r),r.hasOwnProperty("oneOf"))for(var a=0;a<r.oneOf.length;a++)n(e+"."+a,r.oneOf[a],i);else if(r.hasOwnProperty("$ref")){var o=t(r.$ref);if(o){if(r.hasOwnProperty("title")||r.hasOwnProperty("description")){var s={};for(var l in o)s[l]=o[l];r.hasOwnProperty("title")&&(s.title=r.title),r.hasOwnProperty("description")&&(s.description=r.description),o=s}n(e,o,i)}}else if("object"===r.type){if(r.properties)for(var l in r.properties)n(e+"."+l,r.properties[l],i);if(r.patternProperties)for(var d in r.patternProperties)n(e+"[/"+d+"/]",r.patternProperties[d],i);"object"==typeof r.additionalProperties?n(e+"[*]",r.additionalProperties,i):r.additionalProperties===!0&&n(e+"[*]",{},i)}else if("array"===r.type&&r.items)if(Array.isArray(r.items)){r.additionalItems&&n(e+"[$]",{},i);for(var a=0;a<r.items.length;a++)n(e+"["+a+"]",r.items[a],i)}else n(e+"[#]",r.items,i)}n("$",e,r)},visitInstanceChildren:function(e,r,t){if(r.oneOf)for(var n=0;n<r.oneOf.length;n++)t("","."+n,e);else if(Array.isArray(e))if(Array.isArray(r.items))if(r.additionalItems){for(var n=0;n<r.items.length;n++)t("["+n+"]","["+n+"]",e[n]);for(var n=r.items.length;n<e.length;n++)t("["+n+"]","[$]",e[n])}else for(var n=0;n<e.length;n++)t("["+n+"]","["+n+"]",e[n]);else for(var n=0;n<e.length;n++)t("["+n+"]","[#]",e[n]);else if("object"==typeof e)for(var i in e)if(r.properties&&r.properties.hasOwnProperty(i))t("."+i,"."+i,e[i]);else if(r.patternProperties)for(var a in r.patternProperties){var o=RegExp(a);-1!==i.search(o)&&t("."+i,"[/"+a+"/]",e[i])}else r.additionalProperties&&t("."+i,"[*]",e[i])}},e.version||(e.version={}),e.version["draft-05"]||(e.version["draft-05"]={}),e.version["draft-05"].initializer={initSchemaBean:function(e){e.schema["default"]&&e.setValue(e.schema["default"])},createPseudoSchema:function(e,r){var t={};for(var n in r)if("items"===n)if(Array.isArray(r.items)){t.items=[];for(var i=0;i<r.items.length;i++)t.items[i]=e+"["+i+"]"}else t.items=e+"[#]";else if("properties"===n){t.properties={};for(var a in r.properties)t.properties[a]=e+"."+a}else if("patternProperties"===n){t.patternProperties={};for(var o in r.patternProperties)t.patternProperties[o]=e+"[/"+o+"/]"}else"additionalProperties"===n&&"object"==typeof r.additionalProperties?t.additionalProperties=e+"[*]":t[n]=r[n];return t.$schema||(t.$schema="http://json-schema.org/draft-05/schema#"),t}},e.version||(e.version={}),e.version["draft-05"]||(e.version["draft-05"]={}),e.version["draft-05"].ArrayRenderer=function(r,t){function n(){var t=s.rows.length,n=document.createElement("tr");n.className="item";var i=document.createElement("td");i.className="item-index";var o=document.createElement("td");o.className="item-action";var l=document.createElement("td");l.className="item-value";var d=document.createElement("button");d.setAttribute("type","button"),d.className="remove",r.getSchema().readOnly===!0&&(d.disabled=!0),e.utils.appendChild(d,document.createTextNode("x"),r),a[r.id+"["+t+"]"]={},a[r.id+"["+t+"]"][r.schemaId+"[#]"]=l,d.onclick=function(){var e=r.getValue();e.splice(n.rowIndex,1),r.setValue(e)},e.utils.appendChild(o,d,r);var u=document.createTextNode(t+1);e.utils.appendChild(i,u,r),e.utils.appendChild(n,i,r),e.utils.appendChild(n,o,r),e.utils.appendChild(n,l,r),e.utils.appendChild(s,n,r)}function i(){delete a[r.id+"["+(s.rows.length-1)+"]"],s.deleteRow(s.rows.length-1)}if(!t)throw"A html container is required to render";if(r&&r.getSchema()){var a={},o=document.createElement("div"),s=document.createElement("table");s.className="array";var l=document.createElement("button");r.getSchema().readOnly&&(l.disabled=!0),l.setAttribute("type","button"),l.onclick=function(){var e=r.getValue();null===e&&(e=[]),e[e.length]=null,r.setValue(e)},e.utils.appendChild(l,document.createTextNode(e.utils.i18n.getTranslation("addItem")),r),e.utils.appendChild(o,s,r),e.utils.appendChild(o,l,r);var d=r.getValue();if(d)for(var u=0;u<d.length;u++)n();e.utils.appendChild(t,o,r),this.getChildContainer=function(e,r){return a[e]?a[e][r]:null},r.onValueChanged=function(e){for(var r=null!==e?e.length:0,t=s.rows.length,a=t;r>a;a++)n();for(var a=r;t>a;a++)i()}}},e.version["draft-05"].ArrayRenderer.prototype=new e.rendering.Renderer,e.version||(e.version={}),e.version["draft-05"]||(e.version["draft-05"]={}),e.version["draft-05"].ObjectRenderer=function(r,t){function n(e){var t,n;if(!r.getSchema().properties||!r.getSchema().properties.hasOwnProperty(e))if(r.getSchema().patternProperties){for(var o in r.getSchema().patternProperties)if(!r.getSchema().properties||!r.getSchema().properties.hasOwnProperty(e)){var s=RegExp(o);if(-1!==e.search(s)){t=e,n=r.getSchema().patternProperties[o];break}}}else r.getSchema().additionalProperties&&(t=".*",n=r.schemaId+"[*]");t?a(e,n):i(e)}function i(t){var n=document.createElement("tr"),i=document.createElement("td");i.className="prop-name";var a=document.createElement("td");a.className="prop-value",e.utils.appendChild(n,i,r),n.propertyName=t,e.utils.appendChild(i,document.createTextNode(t),r),e.utils.appendChild(n,a,r),s[r.id+"."+t]={},s[r.id+"."+t][r.schemaId+"."+t]=a,e.utils.appendChild(d,n,r)}function a(t,n){var i=document.createElement("tr"),a=document.createElement("td");a.className="prop-name";var o=document.createElement("td");o.className="prop-value",e.utils.appendChild(i,a,r),i.propertyName=t,e.utils.appendChild(a,document.createTextNode(t),r);var l=document.createElement("button");l.setAttribute("type","button"),l.className="remove",l.onclick=function(){var e=r.getValue();delete e[t],r.setValue(e)},e.utils.appendChild(l,document.createTextNode("x"),r),e.utils.appendChild(a,l,r),e.utils.appendChild(i,o,r),s[r.id+"."+t]={},s[r.id+"."+t][n]=o,e.utils.appendChild(d,i,r)}function o(e){delete s[r.id+"."+e];for(var t=0;t<d.rows.length;t++)if(d.rows[t].propertyName===e){d.deleteRow(t);break}}var s={},l=document.createElement("div"),d=document.createElement("table");l.className="object",e.utils.appendChild(l,d,r);var u=r.getValue(),f=u;if(r.getSchema().properties)for(var p in r.getSchema().properties)n(p);if(r.getSchema().patternProperties||r.getSchema().additionalProperties){var c=document.createElement("tr");e.utils.appendChild(d,c,r);var h=document.createElement("td");h.className="pattern-property-name",e.utils.appendChild(c,h,r);var v=document.createElement("td");v.className="pattern-property-add",e.utils.appendChild(c,v,r);var m=document.createElement("input");m.type="text";var g="";for(var y in r.getSchema().patternProperties)g.length>0?g+=", ":g="Accepted patterns: ",g+="/"+y+"/";m.title=g,e.utils.appendChild(h,m,r);var V=document.createElement("button");V.setAttribute("type","button"),V.onclick=function(){var e=m.value;if(e){var t=r.getValue();if(!(r.getSchema().properties&&r.getSchema().properties.hasOwnProperty(e)||t.hasOwnProperty(e))){var n;if(r.getSchema().patternProperties)for(var i in r.getSchema().patternProperties){var a=RegExp(i);if(-1!==e.search(a)){n=r.getSchema().patternProperties[i];break}}!n&&r.getSchema().additionalProperties&&(n=r.schemaId+"[*]"),n&&(t[e]=null,r.setValue(t))}}},e.utils.appendChild(V,document.createTextNode(e.utils.i18n.getTranslation("addProperty")),r),e.utils.appendChild(v,V,r);for(var p in u)r.getSchema().properties&&r.getSchema().properties.hasOwnProperty(p)||n(p)}e.utils.appendChild(t,l,r),this.getChildContainer=function(e,r){return s[e]?s[e][r]:null},r.onValueChanged=function(e){for(var t in e)r.getSchema().properties&&r.getSchema().properties.hasOwnProperty(t)||f&&f.hasOwnProperty(t)||n(t);for(var t in f)r.getSchema().properties&&r.getSchema().properties.hasOwnProperty(t)||e.hasOwnProperty(t)||o(t);f=e}},e.version["draft-05"].ObjectRenderer.prototype=new e.rendering.Renderer,e.version||(e.version={}),e.version["draft-05"]||(e.version["draft-05"]={}),e.version["draft-05"].OneofRenderer=function(r,t){function n(){a&&s.removeChild(a),0===l.selectedIndex?a=null:(a=o[r.schemaId+"."+(l.selectedIndex-1)],e.utils.appendChild(s,a))}function i(){if(!e.rendering.context.valueChangedInRenderer){for(var t=0,i=[],a=0;a<r.getSchema().oneOf.length;a++){var o=r.schemaId+"."+a,s=r.getErrors(r.id,o);for(var d in s)for(var u in s[d]){var f=s[d][u];Array.isArray(f)&&(f=f[0]),"error.type"===f&&i.push(a)}}if(i.length===r.getSchema().oneOf.length-1)for(var a=0;a<r.getSchema().oneOf.length;a++)if(!i.includes(a)){t=a+1;break}l.selectedIndex=t}n()}var a,o={},s=document.createElement("div");s.className="oneof";var l=document.createElement("select");l.onchange=function(){if(0===l.selectedIndex)r.setValue(null);else{var t=r.getSchema(r.schemaId+"."+(l.selectedIndex-1));r.setValue(e.utils.initializeValue(t,null))}n()},e.utils.appendChild(s,l,r),e.utils.appendChild(l,document.createElement("option"),r);for(var d=0;d<r.getSchema().oneOf.length;d++){var u=document.createElement("option"),f=document.createTextNode(d);u.value=d,e.utils.appendChild(u,f,r),e.utils.appendChild(l,u,r);var p=document.createElement("div");p.className="oneof-option",o[r.schemaId+"."+d]=p}this.getChildContainer=function(e,t){return e!==r.id?null:o[t]},e.utils.appendChild(t,s,r),r.onValueChanged=i,i()},e.version["draft-05"].OneofRenderer.prototype=new e.rendering.Renderer,e.version||(e.version={}),e.version["draft-05"]||(e.version["draft-05"]={}),e.version["draft-05"].rendererFactory={createRender:function(r,t){if(!r||!r.getSchema())throw"A valid rendering bean is required";return"array"===r.getSchema().type?new e.version["draft-05"].ArrayRenderer(r,t):"object"===r.getSchema().type?new e.version["draft-05"].ObjectRenderer(r,t):r.getSchema().oneOf?new e.version["draft-05"].OneofRenderer(r,t):new e.version["draft-05"].SimpleRenderer(r,t)}},e.version||(e.version={}),e.version["draft-05"]||(e.version["draft-05"]={}),e.version["draft-05"].SimpleRenderer=function(r,t){function n(t){var n;if(t.type)if(t.media)n=document.createElement("input"),n.type="file",n.setValue=function(e){null===e||"undefined"==typeof e?n.value="":n.value=e};else if(t["enum"]){n=document.createElement("select");var i=document.createElement("option"),a=document.createTextNode("");i.value="",e.utils.appendChild(i,a,r),e.utils.appendChild(n,i,r);for(var o=0;o<t["enum"].length;o++){var i=document.createElement("option"),a=document.createTextNode(t["enum"][o]);i.value=t["enum"][o],e.utils.appendChild(i,a,r),e.utils.appendChild(n,i,r)}n.setValue=function(e){if(n.selectedIndex=0,null!==e)for(var r=0;r<n.options.length;r++){var t=n.options[r];if(t.value===e.toString()){n.selectedIndex=r;break}}}}else if("boolean"===t.type){n=document.createElement("select");var s=document.createElement("option"),l=document.createTextNode("");l.value="",e.utils.appendChild(s,l,r),e.utils.appendChild(n,s,r);var d=document.createElement("option"),u=document.createTextNode(e.utils.i18n.getTranslation("true"));d.value=!0,e.utils.appendChild(d,u,r),e.utils.appendChild(n,d,r);var f=document.createElement("option"),p=document.createTextNode(e.utils.i18n.getTranslation("false"));f.value=!1,e.utils.appendChild(f,p,r),e.utils.appendChild(n,f,r),n.setValue=function(e){if(n.selectedIndex=0,null!==e)for(var r=0;r<n.options.length;r++){var t=n.options[r];if(t.value===e.toString()){n.selectedIndex=r;break}}}}else{n=document.createElement("input");var c;try{"integer"===t.type||"number"===t.type?(n.type="number",n.step=t.step?t.step.toString():"any",c=/-?(\d+|\d+\.\d+|\.\d+)([eE][-+]?\d+)?/):"date-time"===t.format?n.type="datetime-local":"email"===t.format?n.type="email":"text"===t.format?n=document.createElement("textarea"):n.type="text"}catch(h){n.type="text"}n.setValue=function(e){null===e||"undefined"==typeof e||"object"==typeof e||c&&!c.test(e)?n.value="":n.value=e}}else n=document.createElement("textarea"),n.setValue=function(e){null===e||"undefined"==typeof e?n.value="":n.value=JSON.stringify(e,null,4)};return t.description&&(n.title=t.description,n.placeholder=t.description),t.readOnly&&(n.disabled=!0),n.setAttribute("autocorrect","off"),n}function i(e,r){if(!e)return null;if("function"==typeof r.getValue)return r.getValue();var t;return t=e["enum"]?r.options[r.selectedIndex].value:r.value,""===t?null:("integer"===e.type?(t=parseInt(t),isFinite(t)||(t=null)):"number"===e.type?(t=parseFloat(t),isFinite(t)||(t=null)):"boolean"===e.type?"input"===r.tagName.toLowerCase()?(t=r.checked,t||(t=!1)):"select"===r.tagName.toLowerCase()&&(t="true"===r.value?!0:"false"===r.value?!1:null):e.type||t&&(t=JSON.parse(t)),t)}var a,o=!0;if(!t)throw"A html container is required to render";r&&r.getSchema()&&(a=n(r.getSchema()),r.getValue()&&a.setValue(r.getValue()),a.onchange=function(){o=!1,r.setValue(i(r.getSchema(),a)),o=!0},r.onValueChanged=function(e){o&&a.setValue(e)},e.utils.appendChild(t,a,r))},e.version["draft-05"].SimpleRenderer.prototype=new e.rendering.Renderer,e.version||(e.version={}),e.version["draft-05"]||(e.version["draft-05"]={}),e.version["draft-05"].ArrayValidator=function(){this.doValidate=function(e,r){if("array"===e.type){var t=[];if(r){if(Array.isArray(r)){if(e.minItems&&e.minItems>r.length&&t.push(["error.minItems",e.minItems,r.length]),e.maxItems&&e.maxItems<r.length&&t.push(["error.maxItems",e.maxItems,r.length]),Array.isArray(e.items)&&!e.additionalItems&&e.items.length<r.length&&t.push("error.additionalItems"),e.uniqueItems)e:for(var n=0;n<r.length;n++)for(var i=n+1;i<r.length;i++)if(JSON.stringify(r[n])===JSON.stringify(r[i])){t.push("error.uniqueItems");break e}}else t.push(["error.type","array",typeof r]);return t}}}},e.version["draft-05"].ArrayValidator.prototype=new e.validation.Validator,e.version["draft-05"].validator||(e.version["draft-05"].validator=new e.validation.DelegatingValidator),e.version["draft-05"].validator.registerConcreteValidator(new e.version["draft-05"].ArrayValidator),e.version||(e.version={}),e.version["draft-05"]||(e.version["draft-05"]={}),e.version["draft-05"].BooleanValidator=function(){this.doValidate=function(e,r){if("boolean"===e.type){var t=[];if(r)return"boolean"!=typeof r&&t.push(["error.type","boolean",typeof r]),t}}},e.version["draft-05"].BooleanValidator.prototype=new e.validation.Validator,e.version["draft-05"].validator||(e.version["draft-05"].validator=new e.validation.DelegatingValidator),e.version["draft-05"].validator.registerConcreteValidator(new e.version["draft-05"].BooleanValidator),e.version||(e.version={}),e.version["draft-05"]||(e.version["draft-05"]={}),e.version["draft-05"].CommonValidator=function(){this.doValidate=function(e,r){if(r){var t=[];if(e["enum"]){for(var n=!1,i=0;i<e["enum"].length;i++)if(JSON.stringify(r)===JSON.stringify(e["enum"][i])){n=!0;break}n||t.push("error.enum")}return t}}},e.version["draft-05"].CommonValidator.prototype=new e.validation.Validator,e.version["draft-05"].validator||(e.version["draft-05"].validator=new e.validation.DelegatingValidator),e.version["draft-05"].validator.registerConcreteValidator(new e.version["draft-05"].CommonValidator),e.version||(e.version={}),e.version["draft-05"]||(e.version["draft-05"]={}),e.version["draft-05"].NumberValidator=function(){this.doValidate=function(e,r){if("number"===e.type||"integer"===e.type){var t=[];if(r)return"number"!=typeof r?t.push(["error.type","number",typeof r]):(e.multipleOf&&r%e.multipleOf!==0&&t.push(["error.multipleOf",e.multipleOf,r]),e.maximum&&(r>e.maximum?t.push(["error.maximum",e.maximum,r]):e.exclusiveMaximum&&r===e.maximum&&t.push(["error.exclusiveMaximum",e.maximum])),e.minimum&&(r<e.minimum?t.push(["error.minimum",e.minimum,r]):e.exclusiveMinimum&&r===e.minimum&&t.push(["error.exclusiveMinimum",e.minimum]))),t}}},e.version["draft-05"].NumberValidator.prototype=new e.validation.Validator,e.version["draft-05"].validator||(e.version["draft-05"].validator=new e.validation.DelegatingValidator),e.version["draft-05"].validator.registerConcreteValidator(new e.version["draft-05"].NumberValidator),e.version||(e.version={}),e.version["draft-05"]||(e.version["draft-05"]={}),e.version["draft-05"].ObjectValidator=function(){this.doValidate=function(e,r){if("object"===e.type){var t=[];if(r){if(Array.isArray(r))t.push(["error.type","object","array"]);else if("object"!=typeof r)t.push(["error.type","object",typeof r]);else{for(var n in r)if(!e.properties||!e.properties.hasOwnProperty(n)){var i=!1;if(e.patternProperties)for(var a in e.patternProperties){var o=RegExp(a);if(-1!==n.search(o)){i=!0;break}}i||e.additionalProperties||t.push(["error.invalidProperty",n])}var s=Object.keys(r).length;if(e.minProperties&&e.minProperties>s&&t.push(["error.minProperties",e.minProperties,s]),e.maxProperties&&e.maxProperties<s&&t.push(["error.maxProperties",e.maxProperties,s]),Array.isArray(e.required))for(var l=0;l<e.required.length;l++){var d=e.required[l];r.hasOwnProperty(d)&&"undefined"!=typeof r[d]&&null!==r[d]||t.push(["error.required",d])}}return t}}}},e.version["draft-05"].ObjectValidator.prototype=new e.validation.Validator,e.version["draft-05"].validator||(e.version["draft-05"].validator=new e.validation.DelegatingValidator),e.version["draft-05"].validator.registerConcreteValidator(new e.version["draft-05"].ObjectValidator),e.version||(e.version={}),e.version["draft-05"]||(e.version["draft-05"]={}),e.version["draft-05"].OneofValidator=function(){this.doValidate=function(e,r,t){if(e.oneOf&&(!t||e.oneOf.length!==t.length+1)){var n=[];return n.push(["error.oneOf",e.oneOf.length-t.length]),n}},this.isAbsorvedChildrenErrors=function(e,r,t){return e.oneOf&&t&&e.oneOf.length!==t.length?!0:!1}},e.version["draft-05"].OneofValidator.prototype=new e.validation.Validator,e.version["draft-05"].validator||(e.version["draft-05"].validator=new e.validation.DelegatingValidator),e.version["draft-05"].validator.registerConcreteValidator(new e.version["draft-05"].OneofValidator),e.version||(e.version={}),e.version["draft-05"]||(e.version["draft-05"]={}),e.version["draft-05"].StringValidator=function(){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.doValidate=function(r,t){if("string"===r.type){var n=[];if(t){if("string"!=typeof t)n.push(["error.type","string",typeof t]);else{r.pattern?r.pattern.test(t)||n.push(["error.pattern",r.pattern,t]):"email"===r.format&&(e.test(t)||n.push(["error.pattern.email",e.toString(),t]));var i=t?t.length:0;r.minLength&&r.minLength<i&&n.push(["error.minLength",r.minLength,i]),r.maxLength&&r.maxLength>i&&n.push(["error.maxLength",r.maxLength,i])}return n}}}},e.version["draft-05"].StringValidator.prototype=new e.validation.Validator,e.version["draft-05"].validator||(e.version["draft-05"].validator=new e.validation.DelegatingValidator),e.version["draft-05"].validator.registerConcreteValidator(new e.version["draft-05"].StringValidator),e.version||(e.version={}),e.version.defaultVersion="draft-05",e.version.getVersion=function(r){var t=this.defaultVersion;if(r.$schema)for(var n in e.versions)if(r.$schema.includes(n)){t=n;break}return t},brutusin.schemas=e}();